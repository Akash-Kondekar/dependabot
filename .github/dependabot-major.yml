name: Trigger Dependabot Major Updates

on:
    schedule:
        - cron: "0 0 1 */6 *"
    workflow_dispatch:

jobs:
    trigger-major:
        runs-on: ubuntu-latest
        steps:
            - name: Trigger Dependabot Major Update Job
              run: |
                  curl -X POST \
                  -H "Accept: application/vnd.github+json" \
                  -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
                  https://api.github.com/repos/${{ github.repository }}/dependabot/updates \
                  -d '{
                    "package-ecosystem": "npm",
                    "directory": "/",
                    "target-branch": "main",
                    "allow": [{
                      "update-type": "version-update:semver-major"
                    }]
                  }'
